# [JsonFormatter.java](JsonFormatter.java) implements [Formatter.java](../Formatter.java)

Класс `JsonFormatter` предназначен для чтения и записи коллекций объектов `Person` из/в JSON файл. Вот ключевые моменты кода:

## Основные компоненты

1. **Инициализация Gson**:
    - Объект `Gson` создается с помощью `GsonBuilder`, который:
        - Устанавливает режим парсинга lenient.
        - Регистрирует пользовательскую фабрику адаптеров типов (`IgnoreFailureTypeAdapterFactory`).
        - Регистрирует пользовательский десериализатор (`ResourceDeserializer`) для `LinkedList`.

2. **Конструктор**:
    - Конструктор `JsonFormatter` принимает объект `Path`, представляющий путь к файлу, из которого будут считываться или в который будут записываться данные JSON.

3. **Метод чтения** (`read()`):
    - Проверяет, существует ли файл и доступен ли он для чтения.
    - Использует `FileWorker` (конкретно `BufferedFileWorker`) для чтения содержимого файла.
    - Десериализует содержимое файла в объект `Root`, который содержит коллекцию объектов `Person`.
    - Возвращает коллекцию или пустой список, если возникли какие-либо проблемы.

4. **Метод записи** (`write(List<Person> values)`):
    - Проверяет, существует ли файл и доступен ли он для записи.
    - Использует `FileWorker` для записи сериализованного представления JSON коллекции в файл.
    - Обрабатывает ошибки, выводя сообщения об ошибках в стандартный поток ошибок.

5. **Метод готовности** (`ready()`):
    - Проверяет следующие условия:
        - Файл существует.
        - Файл доступен для чтения и записи.
        - Файл не является директорией.
    - Возвращает _(по выше описанным критериям)_ `true`, если файл готов для операций, в противном случае `false`.

6. **Метод закрытия** (`close()`):
    - Ничего не делает в этой реализации, но предоставляется для соответствия интерфейсу `Formatter`.

## Для чего нужны адаптеры? [IgnoreFailureTypeAdapterFactory.java](adapters/IgnoreFailureTypeAdapterFactory.java) & [ResourceDeserializer.java](adapters/ResourceDeserializer.java)

- **`IgnoreFailureTypeAdapterFactory`**:
    - Позволяет игнорировать ошибки при десериализации объектов.
    - Пропускает объекты, которые не могут быть десериализованы, и продолжает десериализацию остальных объектов.
- **`ResourceDeserializer`**:
    - Десериализует объекты `Resource` из JSON и возвращает их в виде `List<Person>`.